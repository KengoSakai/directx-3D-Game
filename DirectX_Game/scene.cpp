/******************************************************************
***
***		オブジェクト管理処理
***
***		scene.cpp
***
***		author: Kengo Sakai
***
*******************************************************************/

/******************************************************************
インクルードファイル
*******************************************************************/
#include "scene.h"
#include "renderer.h"
/******************************************************************
マクロ定義
*******************************************************************/


/******************************************************************
構造体定義
*******************************************************************/


/******************************************************************
プロトタイプ宣言
*******************************************************************/

/******************************************************************
グローバル変数
*******************************************************************/
CScene *CScene::m_apScene[NUM_OBJECT];
int CScene :: m_nNumScene;
/******************************************************************/

/******************************************************************
コンストラクタ
*******************************************************************/
CScene :: CScene()
{
	for(int nCntScene = 0 ; nCntScene < NUM_OBJECT ; nCntScene++)
	{
		if(m_apScene[nCntScene] == NULL)
		{
			m_apScene[nCntScene] = this;
			m_nID = nCntScene;
			m_nNumScene++;
			break;
		}
	}
}

/******************************************************************
デストラクタ
*******************************************************************/
CScene :: ~CScene()
{

}

/******************************************************************
オブジェクト全更新処理関数
*******************************************************************/
void CScene :: UpdateAll(void)
{
	for(int nCntScene = 0 ; nCntScene < NUM_OBJECT ; nCntScene++)
	{
		if(m_apScene[nCntScene] != NULL)
		{
			m_apScene[nCntScene] -> Update();
		}
	}
}

/******************************************************************
オブジェクト終了処理関数
*******************************************************************/
void CScene :: Release (void)
{
	//変数宣言
	int nID;
	nID = m_nID;	//オブジェクトの総数を代入

	if(m_apScene[m_nID] != NULL)
	{
		delete m_apScene[nID] ;
		m_apScene[nID] = NULL ;
		m_nNumScene--;
	}
}

/******************************************************************
オブジェクト全終了処理関数
*******************************************************************/
void CScene :: ReleaseAll (void)
{
	for(int nCntScene = 0 ; nCntScene < NUM_OBJECT ; nCntScene++)
	{
		if(m_apScene[nCntScene] != NULL)
		{
			m_apScene[nCntScene] -> Uninitialize();
		}
	}
}

/******************************************************************
//オブジェクト全描画処理関数
*******************************************************************/
void CScene::DrawAll(void)
{
	for(int nCntScene = 0 ; nCntScene < NUM_OBJECT ; nCntScene++)
	{
		if(m_apScene[nCntScene] != NULL)
		{
			m_apScene[nCntScene] -> Draw();
		}
	}
}

/******************************************************************
オブジェクトの種類格納関数
*******************************************************************/
void CScene :: SetObjType(OBJTYPE type)
{
	m_objType = type;
}
